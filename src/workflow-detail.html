{% extends "components/layout-listLayout.html" %}

{% block content %}
	<h1>My Workflow</h1>
	
	<input id="workflow-filter" class="uk-input" type="text" placeholder="Search">
	
	{% embed "components/molecule-workflowStep.html" with {title: "The Heart of God"} only %}
		{% block stepBody %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
		{% endblock %}
	{% endembed %}
	
	{% embed "components/molecule-workflowStep.html" with {title: "The Heart of God"} only %}
		{% block stepBody %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
		{% endblock %}
	{% endembed %}
	
	{% embed "components/molecule-workflowStep.html" with {title: "The Heart of God"} only %}
		{% block stepBody %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
			{% include "components/molecule-workflowEntry.html" %}
		{% endblock %}
	{% endembed %}
	
	{% embed "components/molecule-workflowStep.html" with {title: "The Heart of God"} only %}
		{% block stepBody %}
		{% endblock %}
	{% endembed %}
	<script>
		$(document).ready(function () {
			var entries = $('.molecule-workflowEntry');
			var quantity = entries.length;
			$.ajax({
				url: 'https://randomuser.me/api/?inc=name,picture&results='+quantity,
				dataType: 'json',
				success: function(data) {
					var results = data.results;
					var threshold = Math.random();
					entries.each(function() {
						var r = results.pop();
						var name = r.name.first+' '+r.name.last;
						$('.molecule-workflowEntry__name, .uk-modal-title', this).html(name);
						if (Math.random() > threshold) $('.atom-avatar', this).prepend('<img src="'+r.picture.large+'" />');
					});
				}
			});
			
			$('#workflow-filter').on('keyup', function () {
				var val = $(this).val();

				$('.molecule-workflowEntry').each(function	() {
					var $this = $(this);
					var name = $this.find('.molecule-workflowEntry__name').text();
					var filterMatchesName = name.toLowerCase().includes(val.toLowerCase());
					$this.toggle(filterMatchesName);
				});
			});
		});
	</script>
{% endblock %}